(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var r=t(1),c=t(15),o=t.n(c),a=t(6),i=t(3),u=t(0),s=function(e){return Object(u.jsx)("div",{children:Object(u.jsxs)("span",{children:["filter shown with:",Object(u.jsx)("input",{style:{marginBottom:"10px",marginTop:"10px"},onChange:e.handleChange,value:e.searchPerson})]})})},d=function(e){var n={marginBottom:"10px",marginTop:"10px"};return Object(u.jsxs)("form",{onSubmit:e.addPerson,children:[Object(u.jsx)("h2",{children:"Add a new:"}),Object(u.jsxs)("p",{children:[Object(u.jsx)("label",{children:"Name: "}),Object(u.jsx)("input",{style:n,onChange:e.handleNameChange,value:e.newPerson,required:!0})]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("label",{children:"Number: "}),Object(u.jsx)("input",{style:n,onChange:e.handlePhoneChange,value:e.newPhone,required:!0})]}),Object(u.jsx)("button",{style:n,type:"submit",children:"Add contact"})]})},l=function(e){var n=e.person,t=e.deletePerson;return Object(u.jsxs)("li",{style:{marginBottom:"10px",marginTop:"10px",fontSize:"18px",color:"#2e2e2e"},children:[n.name,", ",n.number,Object(u.jsx)("button",{style:{marginLeft:"10px"},onClick:function(){return t(n)},children:"DELETE"})]})},f=t(4),h=t.n(f),b="/api/persons",j={getAll:function(){return h.a.get(b).then((function(e){return e.data}))},create:function(e){return h.a.post(b,e).then((function(e){return e.data}))},deletePerson:function(e){return h.a.delete("".concat(b,"/").concat(e)).then((function(e){return e.status}))},update:function(e,n){return h.a.put("".concat(b,"/").concat(e),n).then((function(e){return e.data}))}},m=function(e){var n=e.message,t={padding:"10px",color:"green",border:"green 2px solid",borderRadius:"15px",margin:"15px 0",fontSize:"20px",backgroundColor:"rgb(237, 255, 233)"};return n.success||(t.color="red",t.borderColor="#ff4040",t.backgroundColor="rgb(255, 250, 250)"),n.info?Object(u.jsx)("div",{style:t,children:n.info}):null},p=function(){var e=Object(r.useState)([]),n=Object(i.a)(e,2),t=n[0],c=n[1],o=Object(r.useState)(""),f=Object(i.a)(o,2),h=f[0],b=f[1],p=Object(r.useState)(""),O=Object(i.a)(p,2),x=O[0],g=O[1],v=Object(r.useState)(""),w=Object(i.a)(v,2),P=w[0],C=w[1],y=Object(r.useState)([]),k=Object(i.a)(y,2),S=k[0],E=k[1],A=Object(r.useState)({info:null}),L=Object(i.a)(A,2),N=L[0],T=L[1];Object(r.useEffect)((function(){j.getAll().then((function(e){return c(e)}))}),[]);var B=function(e){return setTimeout((function(){return e({info:null})}),3500)},q=function(e){window.confirm("Are you sure that you want delete ".concat(e.name," contact"))&&j.deletePerson(e.id).then((function(n){204===n&&c(t.filter((function(n){return n.id!==e.id})))})).catch((function(){T({info:"the contact ".concat(e.name," non exist on the server"),success:!1}),B(T),c(t.filter((function(n){return n.id!==e.id})))}))};Object(r.useEffect)((function(){var e=t.filter((function(e){var n=e.name;return new RegExp(P,"gi").test(n)}));E(e)}),[P,t]);var z=S.length>0?S:t;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(m,{message:N}),Object(u.jsx)(s,{handleChange:function(e){return C(e.target.value)},searchPerson:P}),Object(u.jsx)(d,{addPerson:function(e){e.preventDefault();var n=t.filter((function(e){return e.name.toLocaleLowerCase()===h.toLocaleLowerCase()}));if(n.length>0){var r=n[0];if(!window.confirm("".concat(r.name," is already added to Phonebook, replace the old number with a new one?")))return;j.update(r.id,Object(a.a)(Object(a.a)({},r),{},{number:x})).then((function(e){T({info:"Updated ".concat(e.name," phone"),success:!0}),c(t.map((function(n){return n.id===e.id?e:n}))),B(T)})).catch((function(){T({info:"Information of ".concat(r.name," has already been removed from the server"),success:!1}),B(T),c(t.filter((function(e){return e.id!==r.id})))}))}else{var o={name:h,number:x};j.create(o).then((function(e){T({info:"Added ".concat(e.name),success:!0}),c(t.concat(e)),B(T)}))}b(""),g("")},handleNameChange:function(e){return b(e.target.value)},handlePhoneChange:function(e){return g(e.target.value)},newPerson:h,newPhone:x}),Object(u.jsx)("h2",{children:"Numbers"}),Object(u.jsx)("ul",{children:z.map((function(e){return Object(u.jsx)(l,{person:e,deletePerson:q},e.name)}))})]})};t(39);o.a.render(Object(u.jsx)(p,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.f9917941.chunk.js.map